{% load static %}
<!DOCTYPE HTML>
<html>

  <head>
    <title>WHERE</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="{% static 'css/main.css' %}"/>

    {% block style %}{% endblock style %}
  </head>

  <body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

      <!-- Header -->
      <header id="header">
        <div class="logo">
          <span class="icon fa-gem"></span>
        </div>
        <div class="content">
          <div class="inner">
            <h1>WHERE</h1>
            <p>WHERE WE GO NOW?</p>
          </div>
        </div>
        <nav>
          <ul>
            <li>
              <a href="{% url 'foodcategory' %}">뭐먹지?</a>
            </li>
            <li>
              <a href="#work">뭐마시지?</a>
            </li>
            <li>
              <a href="#about">뭐하지?</a>
            </li>
            <li>
              <a href="#contact">게시판</a>
            </li>
            {% if user.is_authenticated %}
			<li>
			  <a aria-current="page" href="{% url 'logout' %}">로그아웃</a>
			</li>
              <li>
                <a href="">{{user.username}}'s info</a>
              </li>
            {% else %}
              <li>
                <a aria-current="page" href="#login">로그인</a>
              </li>
              <li>
                <a href="#register">회원가입</a>
              </li>
            {% endif %}
          </ul>
        </nav>
      </header>

      <!-- Main -->
      <div id="main">
        {% block contents %}{% endblock contents %}
        <!-- Intro -->
        {% comment %} <article id="intro">
          <h2 class="major">Intro</h2>
          <span class="image main"></span>
          <p>Aenean ornare velit lacus, ac varius enim ullamcorper eu. Proin aliquam facilisis ante interdum congue. Integer mollis, nisl amet convallis, porttitor magna ullamcorper, amet egestas mauris. Ut magna finibus nisi nec lacinia. Nam maximus erat id euismod egestas. By the way, check out my
            <a href="#work">awesome work</a>.</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis dapibus rutrum facilisis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam tristique libero eu nibh porttitor fermentum. Nullam venenatis erat id vehicula viverra. Nunc ultrices eros ut ultricies condimentum. Mauris risus lacus, blandit sit amet venenatis non, bibendum vitae dolor. Nunc lorem mauris, fringilla in aliquam at, euismod in lectus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In non lorem sit amet elit placerat maximus. Pellentesque aliquam maximus risus, vel sed vehicula.</p>
        </article> {% endcomment %}

        <!-- Work -->
        <article id="work">
          <h2 class="major">Work</h2>
          <span class="image main"></span>
          <p>Adipiscing magna sed dolor elit. Praesent eleifend dignissim arcu, at eleifend sapien imperdiet ac. Aliquam erat volutpat. Praesent urna nisi, fringila lorem et vehicula lacinia quam. Integer sollicitudin mauris nec lorem luctus ultrices.</p>
          <p>Nullam et orci eu lorem consequat tincidunt vivamus et sagittis libero. Mauris aliquet magna magna sed nunc rhoncus pharetra. Pellentesque condimentum sem. In efficitur ligula tate urna. Maecenas laoreet massa vel lacinia pellentesque lorem ipsum dolor. Nullam et orci eu lorem consequat tincidunt. Vivamus et sagittis libero. Mauris aliquet magna magna sed nunc rhoncus amet feugiat tempus.</p>
        </article>

        <!-- About -->
        <article id="about">
          <h2 class="major">About</h2>
          <span class="image main"></span>
          <p>Lorem ipsum dolor sit amet, consectetur et adipiscing elit. Praesent eleifend dignissim arcu, at eleifend sapien imperdiet ac. Aliquam erat volutpat. Praesent urna nisi, fringila lorem et vehicula lacinia quam. Integer sollicitudin mauris nec lorem luctus ultrices. Aliquam libero et malesuada fames ac ante ipsum primis in faucibus. Cras viverra ligula sit amet ex mollis mattis lorem ipsum dolor sit amet.</p>
        </article>

        <!-- Contact -->
        <article id="contact">
          <h2 class="major">Contact</h2>
          <form method="post" action="#">
            <div class="fields">
              <div class="field half">
                <label for="name">Name</label>
                <input type="text" name="name" id="name"/>
              </div>
              <div class="field half">
                <label for="email">Email</label>
                <input type="text" name="email" id="email"/>
              </div>
              <div class="field">
                <label for="message">Message</label>
                <textarea name="message" id="message" rows="4"></textarea>
              </div>
            </div>
            <ul class="actions">
              <li><input type="submit" value="Send Message" class="primary"/></li>
              <li><input type="reset" value="Reset"/></li>
            </ul>
          </form>
          <ul class="icons">
            <li>
              <a href="#" class="icon brands fa-twitter">
                <span class="label">Twitter</span></a>
            </li>
            <li>
              <a href="#" class="icon brands fa-facebook-f">
                <span class="label">Facebook</span></a>
            </li>
            <li>
              <a href="#" class="icon brands fa-instagram">
                <span class="label">Instagram</span></a>
            </li>
            <li>
              <a href="#" class="icon brands fa-github">
                <span class="label">GitHub</span></a>
            </li>
          </ul>
        </article>

        <!--login-->
        <article id="login">
          <h2 class="major">Login!</h2>
          <form method="post" action="#">
            <div class="container-fluid">
              <div class="row no-gutter">
                <div class="d-none d-md-flex col-md-4 col-lg-6 bg-image"></div>
                <div class="col-md-8 col-lg-6">
                  <div class="login d-flex align-items-center py-5">
                    <div class="container">
                      <div class="row">
                        <div class="col-md-9 col-lg-8 mx-auto pl-5 pr-5">
                          <h3 class="login-heading mb-4">Welcome back!</h3>
                          <form>
                            <div class="form-label-group">
                              <input type="email" id="inputEmail" class="form-control" placeholder="Email address">
                              <label for="inputEmail">Email address / Mobile</label>
                            </div>
                            <div class="form-label-group">
                              <input type="password" id="inputPassword" class="form-control" placeholder="Password">
                              <label for="inputPassword">Password</label>
                            </div>
                            <div class="custom-control custom-checkbox mb-3">
                              <input type="checkbox" class="custom-control-input" id="customCheck1">
                              <label class="custom-control-label" for="customCheck1">Remember password</label>
                            </div>
                            <a href="index.html" class="btn btn-lg btn-outline-primary btn-block btn-login text-uppercase font-weight-bold mb-2">Sign in</a>
                            <div class="text-center pt-3">
                              Don’t have an account?
                              <a class="font-weight-bold" href="#register">Sign Up</a>
                            </div>
                          </form>
                          <hr class="my-4">
                          <p class="text-center">LOGIN WITH</p>
                          <div class="row">
                            <div class="col pr-2">
                              <button class="btn pl-1 pr-1 btn-lg btn-google font-weight-normal text-white btn-block text-uppercase" type="submit">
                                <i class="fab fa-google mr-2"></i>
                                Google</button>
                            </div>
                            <div class="col pl-2">
                              <button class="btn pl-1 pr-1 btn-lg btn-facebook font-weight-normal text-white btn-block text-uppercase" type="submit">
                                <i class="fab fa-facebook-f mr-2"></i>
                                Facebook</button>
                            </div>
                            <div class="col pl-2">
                              <button class="btn pl-1 pr-1 btn-lg btn-kakao font-weight-normal text-white btn-block text-uppercase" type="submit">
                                <i class="fab fa-kakao-f mr-2"></i>
                                Kakao</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
          <ul class="icons">
            <li>
              <a href="#" class="icon brands fa-twitter">
                <span class="label">Twitter</span></a>
            </li>
            <li>
              <a href="#" class="icon brands fa-facebook-f">
                <span class="label">Facebook</span></a>
            </li>
            <li>
              <a href="#" class="icon brands fa-instagram">
                <span class="label">Instagram</span></a>
            </li>
            <li>
              <a href="#" class="icon brands fa-github">
                <span class="label">GitHub</span></a>
            </li>
          </ul>
        </article>

         <!--가입하기 클릭 시 보여줄 화면-->
   <div class="col-4 p-4 right-second">
    <div class="row border mb-2 bg-white">
      <div class="col">
        <div class="row">
          <div class="col">
            <a href="">
              <img src="" alt="" class="mx-auto d-block mt-5">
            </a>
          </div>
        </div>
        <div class="row mt-2 justify-content-center">
          <div class="col-10 align-self-center">
            <p class="text-center friends-info">
              친구들의 사진과 동영상을 보려면 가입하세요
            </p>
          </div>
        </div>
        <div class="row my-2 mx-4 cut-line">
          <div class="col-5 px-0">
            <hr>
          </div>
          <div class="col-2 px-2">
            <p class="pt-2">또는</p>
          </div>
          <div class="col-5 px-0">
            <hr>
          </div>
        </div>
        <form action="" method="post" id="register">
          <div class="form-row mb-2">
            <div class="col">
              <input type="text" name="email" id="email" class="form-control form-control-sm" placeholder="이메일주소">
            </div>
          </div>
          <div class="form-row mb-2">
            <div class="col">
              <input type="password" name="password" id="password" class="form-control form-control-sm" placeholder="비밀번호">
            </div>
          </div>
          <div class="form-row mb-2">
            <div class="col">
              <input type="text" name="name" id="name" class="form-control form-control-sm" placeholder="이름">
            </div>
          </div>
          <div class="form-row mb-2">
            <div class="col">
              <input type="text" name="nickname" id="nickname" class="form-control form-control-sm" placeholder="닉네임">
            </div>
          </div>
          <div class="form-row mb-2">
            <div class="col">
              <input type="submit" class="btn btn-outline-primary btn-block form-control-sm" value="회원가입">
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="row border p-4 bg-white">
      <div class="col text-center">
        <span>계정이 있으신가요?<a href="" class="text-success login">로그인</a>
        </span>
      </div>
    </div>
  </div> 
  <!--가입화면 종료-->

        <!-- Elements -->
        <article id="elements">
          <h2 class="major">Elements</h2>

        </article>

      </div>

      <!-- Footer -->
      <footer id="footer">
        <p class="copyright">&copy; Untitled. Design:
          <a href="https://html5up.net">HTML5 UP</a>.</p>
      </footer>

    </div>

    <!-- BG -->
    <div id="bg"></div>

    <!-- Scripts -->
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/browser.min.js' %}"></script>
    <script src="{% static 'js/breakpoints.min.js' %}"></script>
    <script src="{% static 'js/util.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    {% block script %}
    <script>
      // 회원가입 클릭 시 회원가입 하기 - ajax 방식
      $("#register").on("submit", function (e) {
        e.preventDefault();
        // 폼에 있는 데이터 객체로 만들기
        const form = document.querySelector("#register");
        formData = new FormData(form);
  
        $.ajax({
          url: "{% url 'user_create' %}",
          type: 'post',
          data: formData,
          contentType: false,
          processData: false,
          success: function (response) {
            console.log(response);
            location.reload(); // http://127.0.0.1:8000/페이지 새로고침
          },
          error: function (req, status, error) {
            console.log(req.responseJSON.message);
  
            if (req.responseJSON.error) {
              $.each(req.responseJSON.message, function (name, error) {
                error = "<small class='text-danger'>" + error + "</small>";
                $(form)
                  .find("[name='" + name + "']")
                  .after(error);
              })
            }
          }
        })
      })
    {% endblock script %}
  </body>

</html>
